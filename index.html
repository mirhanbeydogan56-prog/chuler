!-- ===================== index.html ===================== -->
<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>ðŸŽ„ Teilnahmeformular</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";


const firebaseConfig = {
apiKey: "AIzaSyBpuVs9M1vUhR9OXahdm4vhpZMrKl9KuGI",
authDomain: "ertee-fc073.firebaseapp.com",
databaseURL: "https://ertee-fc073-default-rtdb.firebaseio.com",
projectId: "ertee-fc073",
storageBucket: "ertee-fc073.firebasestorage.app",
messagingSenderId: "738703331926",
appId: "1:738703331926:web:fcb8aaf5b54b9a884c21f7"
};


const app = initializeApp(firebaseConfig);
const db = getDatabase(app);


const sifre = localStorage.getItem('sifre');
const meineKarte = document.getElementById('meineKarte');
const liste = document.getElementById('liste');


if(!sifre){
meineKarte.innerHTML = '<p style="opacity:.6">Kein Zugriff</p>';
throw new Error('Kein Code');
}


let erlaubt = false;


const snap = await get(ref(db,'katilanlar'));
snap.forEach(d=>{
const k = d.val();
if(k.sifre === sifre){
erlaubt = true;
meineKarte.innerHTML = `
<div class="profile-card glow">
<h2>${k.ad} ${k.soyad}</h2>
<p>Klasse: ${k.sinif}</p>
<p>Freund: ${k.arkadas}</p>
<p>Depression: ${k.depresyon}%</p>
</div>`;
}
});


window.suche = async function(){
if(!erlaubt) return;
const q = suchfeld.value.toLowerCase();
liste.innerHTML = '';


const snap2 = await get(ref(db,'katilanlar'));
snap2.forEach(d=>{
const k = d.val();
if((k.ad + ' ' + k.soyad).toLowerCase().includes(q)){
liste.innerHTML += `
<div class="profile-card">
<h3>${k.ad} ${k.soyad}</h3>
<span>${k.sinif}</span>
</div>`;
}
});
}
</script>
<style>
body{background:#0b1d3a;color:#fff;font-family:Segoe UI;margin:0}
.card{max-width:420px;margin:60px auto;padding:25px;background:rgba(255,255,255,.12);border-radius:25px}
input,button{width:100%;padding:12px;border-radius:30px;border:none;margin-top:10px}
button{background:#e63946;color:#fff;font-weight:bold}
.row{display:flex;gap:10px}
</style>
</head>
<body>


<div class="card" id="form">
<h2>ðŸŽ„ Teilnahme</h2>
<div class="row"><input id="ad" placeholder="Vorname"><input id="soyad" placeholder="Nachname"></div>
<input id="sinif" placeholder="Klasse">
<input id="arkadas" placeholder="Bester Freund">
<input id="depresyon" type="number" placeholder="Depression %">
<button onclick="absenden()">BestÃ¤tigen</button>
</div>


<div class="card" id="fertig" style="display:none">
<h2>âœ… BestÃ¤tigt</h2>
<p id="code"></p>
<a href="erte.html" style="color:#fff">Zu Erte</a>
</div>


</body>
</html>
